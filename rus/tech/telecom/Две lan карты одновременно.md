суббота, 10 ноября 2007 г. в 12:04:13

Вчера мне провели кабельный интернет и оказалось что теперь у меня старое wifi соединение с хорошим upload каналом но низким ping-ом, и кабель с хорошим ping-ом, но низким upload. Ясное дело - два канала, работает только один, так почему же второму пропадать?

В более общем случае люди конечно хотели бы по максимому использовать оба шлюза (gateway) для получения суммарных скоростей, если бы не различие в IP. Обычно такую задачу перекладывают на рутер, который сам думает какой пакет кинуть по какому шлюзу что-бы ничего не потерялось, но в Windows есть и встроенный инструмент маршрутизации - комманда route.

Проблема лишь в том что она прописывает шлюзы для IP конкретных получателей, что очень полезно при статичных VPN, но в моём случае она бесполезна, поскольку по wifi я хотел бы иметь доступ ко всему спектру IP. Но сузив рамки, я решил что по wifi имеет смысл пустить только mail сервак и задача сводится к маршрутизации пакетов в зависимости от используемых портов (110,25,995).

Для такой перенастройки маршрутизации я попробовал:

- [wipfw](http://wipfw.sourceforge.net/doc-ru.html#roptions), портирование из freeBSD
- [kerio winroute](http://www.winroute.ru/), вместе с уймой настроек, firewall, traffic quotas и тп. Даже основная фича по транслирование сетевых адрессов (NAT) не помогла ником образом
- [Netcom Routix](http://www.routix.net/) по идее очень навороченная прога, позволяющая даже изменять модули маршрутизации по своему усмотрению, если есть знания в Visual Basic.

[Предложения заблокировать порты](http://forum.oszone.net/thread-71922.html) на одном шлюзе с мыслью что они сами побегут на другой - не получилось. Копания в течение суток я понял что data layer и network layer в windows очень слаб, даже несмотря на присутсвие третьих программ. Надеюсь кто-нибудь найдёт решение кроме как установки второго компа.